<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>03img自动宽高</title>
    <style>
        div {
            position: absolute;
            width: 500px;
            height: 500px;
            border: 3px solid darkblue;
        }

        img {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%)
        }

    </style>
    <script>
        window.onload = function () {
            img = document.querySelector("img");
            img.onload = function () {
                //虽然用img.onload解决了问题
                //但是，图片会闪一下，才会适应大小
                if (img.width <= 500 && img.height <= 500) {
                    //do nothing
                } else {
                    if (img.width > img.height) {
                        img.style.width = "500px";
                        img.style.height = "auto"
                    } else {
                        img.style.width = "auto";
                        img.style.height = "500px";
                    }
                }
                img.style.display = "block";
            };
            img.src = "v.jpg";
            //进行完上述操作后，img并没有真正的被渲染，所以dom
        }
    </script>
</head>
<body>
<div>
    <img src="" alt="" style="display: none;">
</div>
</body>
</html>